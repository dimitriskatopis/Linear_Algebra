A=[2 3 0 0
-2 -2 4 0
1 2 2 0
6 1 -1 1]
B= [1 0 0 0 ; 0 1 0 0 ; 0 0 1 0 ; 0 0 0 0; ]*A
r=rank(B)

B=[ 2 3 0 0 ; -2 -2 4 0; 1 2 2 0 ; 0 0 0 0;]
E1=[1 0 0 0; 1 1 0 0; -1/2 0 1 0 ; 0 0 0 1;]
E2=[1 0 0 0 ; 0 1 0 0 ; 0 -1/2 1 0 ; 0 0 0 1;]
Q=E2*E1
E3=[1 -3 0 0; 0 1 0 0 ;0 0 1 0; 0 0 0 1;]
E4=[1/2 0 0 0; 0 1 0 0; 0 0 0 0; 0 0 0 1;]
P=E4*E3
N=Q*B*P